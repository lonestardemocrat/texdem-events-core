import Component from "@ember/component";
import { action } from "@ember/object";
import { inject as service } from "@ember/service";

export default Component.extend({
  title: "",
  startDate: null,
  startTime: null,
  timezone: "America/Chicago",

  timezones: [
    "America/Chicago",
    "America/Denver",
    "America/Los_Angeles",
    "America/New_York"
  ],

  @action
  insertEvent() {
    const composer = this.model?.composer;
    if (!composer) {
      console.error("Composer model not found.");
      this.send("closeModal");
      return;
    }

    let eventText = `[texdem_event
  title="${this.title}"
  start_date="${this.startDate}"
  start_time="${this.startTime}"
  timezone="${this.timezone}"
]`;

    composer.model.reply = `${composer.model.reply}\n\n${eventText}\n`;

    this.send("closeModal");
  },

  @action
  close() {
    this.send("closeModal");
  },
});
